{
  "permissions": {
    "allow": [
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 'mysql -u academia -p\"\"Academia2026Secure\"\" academia_db -e \"\"SELECT id, studentId, deviceId, accessType, timestamp, deviceType FROM access_logs WHERE gymId = 33 AND DATE(timestamp) = ''''2026-01-16'''' ORDER BY timestamp DESC LIMIT 15;\"\"')",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo ''âœ… Logs limpos! Passe o rosto AGORA na leitora...'' && echo ''''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"timeout 60 tail -f /root/.pm2/logs/academia-api-out.log 2>&1 | grep --line-buffered -E ''Processing log|Saved.*log for student|Verificando liberaÃ§Ã£o|Academia.*usa Toletus|Enviando comando|Catraca.*liberada|loadAccessLogs|logs do Control ID''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 logs academia-api --nostream --lines 100 | grep -A 10 -B 5 ''toletus_releaseExit'' | tail -40\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo ''âœ… Logs limpos!'' && echo '''' && echo ''ðŸ”˜ Aperte o BOTÃƒO MANUAL agora'' && echo ''''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"timeout 30 tail -f /root/.pm2/logs/academia-api-out.log 2>&1\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force -ErrorAction Stop; Write-Host ''âœ… Agent atualizado copiado para C:\\SysFit\\agent\\agent.js''; exit 0\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo ''âœ… Logs limpos!'' && echo '''' && echo ''ðŸ‘¤ PASSE O ROSTO NA LEITORA AGORA'' && echo '''' && echo ''ðŸ” Vou monitorar os logs...''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"timeout 90 tail -f /root/.pm2/logs/academia-api-out.log 2>&1\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force -ErrorAction Stop; Write-Host ''âœ… Agent corrigido copiado para C:\\SysFit\\agent\\agent.js''; exit 0\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"mysql -u academia -p''Academia2026Secure'' academia_db -e \"\"SELECT id, studentId, deviceId, accessType, timestamp, CASE WHEN JSON_EXTRACT(rawData, ''$.event'') = 6 THEN ''EVENT_6_ENTRADA'' WHEN JSON_EXTRACT(rawData, ''$.event'') = 7 THEN ''EVENT_7_SAIDA'' ELSE JSON_EXTRACT(rawData, ''$.event'') END as event_type FROM access_logs WHERE gymId = 33 AND studentId = 7 ORDER BY timestamp DESC LIMIT 10;\"\"\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"echo ''ðŸ” Aguardando reconhecimento facial...'' && echo '''' && timeout 120 tail -f /root/.pm2/logs/academia-api-out.log 2>&1 | grep --line-buffered -E ''Tipo de acesso detectado|Sempre liberando ENTRADA|releaseEntry|Catraca.*liberada|Saved.*log for student''\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force -ErrorAction Stop; Write-Host ''âœ… Agent otimizado copiado para C:\\SysFit\\agent\\agent.js (sem discover)''; exit 0\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"New-Item -ItemType Directory -Path ''C:\\SysFit\\agent'' -Force | Out-Null; Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force; Write-Host ''âœ… Agent otimizado copiado para C:\\SysFit\\agent\\agent.js''; Write-Host ''âš¡ CÃ³digo sem discover - liberaÃ§Ã£o mais rÃ¡pida!''; exit 0\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force; Write-Host ''âœ… Agent corrigido copiado para C:\\SysFit\\agent\\agent.js''; Write-Host ''âš¡ Agora com fallback: tenta direto primeiro, se falhar faz discover/connect''; exit 0\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"cd /var/www/academia && git pull origin main && npm run build && pm2 restart academia-api && echo '''' && echo ''âœ… Deploy concluÃ­do! CRON agora roda a cada 3 segundos.''\")"
    ],
    "deny": [],
    "ask": []
  }
}
