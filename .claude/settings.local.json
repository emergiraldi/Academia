{
  "permissions": {
    "allow": [
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 'mysql -u academia -p\"\"Academia2026Secure\"\" academia_db -e \"\"SELECT id, studentId, deviceId, accessType, timestamp, deviceType FROM access_logs WHERE gymId = 33 AND DATE(timestamp) = ''''2026-01-16'''' ORDER BY timestamp DESC LIMIT 15;\"\"')",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo ''‚úÖ Logs limpos! Passe o rosto AGORA na leitora...'' && echo ''''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"timeout 60 tail -f /root/.pm2/logs/academia-api-out.log 2>&1 | grep --line-buffered -E ''Processing log|Saved.*log for student|Verificando libera√ß√£o|Academia.*usa Toletus|Enviando comando|Catraca.*liberada|loadAccessLogs|logs do Control ID''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 logs academia-api --nostream --lines 100 | grep -A 10 -B 5 ''toletus_releaseExit'' | tail -40\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo ''‚úÖ Logs limpos!'' && echo '''' && echo ''üîò Aperte o BOT√ÉO MANUAL agora'' && echo ''''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"timeout 30 tail -f /root/.pm2/logs/academia-api-out.log 2>&1\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force -ErrorAction Stop; Write-Host ''‚úÖ Agent atualizado copiado para C:\\SysFit\\agent\\agent.js''; exit 0\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo ''‚úÖ Logs limpos!'' && echo '''' && echo ''üë§ PASSE O ROSTO NA LEITORA AGORA'' && echo '''' && echo ''üîç Vou monitorar os logs...''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"timeout 90 tail -f /root/.pm2/logs/academia-api-out.log 2>&1\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force -ErrorAction Stop; Write-Host ''‚úÖ Agent corrigido copiado para C:\\SysFit\\agent\\agent.js''; exit 0\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"mysql -u academia -p''Academia2026Secure'' academia_db -e \"\"SELECT id, studentId, deviceId, accessType, timestamp, CASE WHEN JSON_EXTRACT(rawData, ''$.event'') = 6 THEN ''EVENT_6_ENTRADA'' WHEN JSON_EXTRACT(rawData, ''$.event'') = 7 THEN ''EVENT_7_SAIDA'' ELSE JSON_EXTRACT(rawData, ''$.event'') END as event_type FROM access_logs WHERE gymId = 33 AND studentId = 7 ORDER BY timestamp DESC LIMIT 10;\"\"\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"echo ''üîç Aguardando reconhecimento facial...'' && echo '''' && timeout 120 tail -f /root/.pm2/logs/academia-api-out.log 2>&1 | grep --line-buffered -E ''Tipo de acesso detectado|Sempre liberando ENTRADA|releaseEntry|Catraca.*liberada|Saved.*log for student''\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force -ErrorAction Stop; Write-Host ''‚úÖ Agent otimizado copiado para C:\\SysFit\\agent\\agent.js (sem discover)''; exit 0\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"New-Item -ItemType Directory -Path ''C:\\SysFit\\agent'' -Force | Out-Null; Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force; Write-Host ''‚úÖ Agent otimizado copiado para C:\\SysFit\\agent\\agent.js''; Write-Host ''‚ö° C√≥digo sem discover - libera√ß√£o mais r√°pida!''; exit 0\")",
      "Bash(powershell.exe -ExecutionPolicy Bypass -Command \"Copy-Item -Path ''C:\\Projeto\\Academia\\agent\\agent.js'' -Destination ''C:\\SysFit\\agent\\agent.js'' -Force; Write-Host ''‚úÖ Agent corrigido copiado para C:\\SysFit\\agent\\agent.js''; Write-Host ''‚ö° Agora com fallback: tenta direto primeiro, se falhar faz discover/connect''; exit 0\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"cd /var/www/academia && git pull origin main && npm run build && pm2 restart academia-api && echo '''' && echo ''‚úÖ Deploy conclu√≠do! CRON agora roda a cada 3 segundos.''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 logs academia-api --nostream --lines 200 | grep -E ''RAW log.time|Converted timestamp'' | head -10\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 logs academia-api --nostream --lines 300 | head -100\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"cd /var/www/academia && git pull origin main && npm run build && pm2 restart academia-api && echo '''' && echo ''‚úÖ Deploy conclu√≠do! Corre√ß√£o do timestamp aplicada.''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo ''‚úÖ Logs limpos!'' && echo '''' && echo ''üîç Aguardando CRON processar logs (roda a cada 3 segundos)...'' && echo ''''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"echo ''üîç Monitorando CRON em tempo real...'' && echo '''' && timeout 60 tail -f /root/.pm2/logs/academia-api-out.log 2>&1\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 'mysql -u academia -p\"\"Academia2026Secure\"\" academia_db -e \"\"SELECT id, studentId, timestamp, accessType, FROM_UNIXTIME(UNIX_TIMESTAMP(timestamp)) as readable_time FROM access_logs WHERE gymId = 33 AND studentId = 7 ORDER BY timestamp DESC LIMIT 15;\"\"')",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo '''' && echo ''‚úÖ Sistema corrigido e pronto para teste!'' && echo '''' && echo ''üë§ PASSE O ROSTO NA LEITORA FACIAL AGORA'' && echo '''' && echo ''üîç Vou monitorar se:'' && echo ''   1. Log √© salvo no banco'' && echo ''   2. Catraca Toletus √© liberada automaticamente'' && echo ''''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"timeout 120 tail -f /root/.pm2/logs/academia-api-out.log 2>&1 | grep --line-buffered -E ''RAW log.time|Converted timestamp|Processing log.*user_id=2|Saved.*log for student|Verificando libera√ß√£o|Academia.*usa Toletus|Enviando comando|Catraca.*liberada|Duplicate detected''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"cd /var/www/academia && git pull origin main && npm run build && pm2 restart academia-api && echo '''' && echo ''‚úÖ Deploy conclu√≠do! Sistema voltou ao modo SEMPRE LIBERADO para teste.''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo '''' && echo ''‚úÖ Logs limpos!'' && echo '''' && echo ''üë§ PASSE O ROSTO NA LEITORA AGORA!'' && echo ''''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"echo ''üîç Monitorando em tempo real...'' && timeout 120 tail -f /root/.pm2/logs/academia-api-out.log 2>&1 | grep --line-buffered -E ''loadAccessLogs|logs encontrados|Processing log.*user_id=2|Saved.*log for student|Verificando libera√ß√£o|Academia.*usa Toletus|Liberando catraca|Catraca.*liberada''\")",
      "Bash(ssh -o StrictHostKeyChecking=no root@72.60.2.237 \"mysql -u academia -p''Academia2026Secure'' academia_db -e \"\"SELECT id, name, status FROM students WHERE id IN (5, 7) LIMIT 5;\"\"\")",
      "Bash(ssh -o StrictHostKeyChecking=no root@72.60.2.237 \"mysql -u academia -p''Academia2026Secure'' academia_db -e \"\"DESCRIBE students;\"\"\")",
      "Bash(ssh -o StrictHostKeyChecking=no root@72.60.2.237 \"mysql -u academia -p''Academia2026Secure'' academia_db -e \"\"SELECT s.id, u.name, s.membershipStatus FROM students s JOIN users u ON s.userId = u.id WHERE s.id = 7;\"\"\")",
      "Bash(ssh -o StrictHostKeyChecking=no root@72.60.2.237 \"cd /var/www/academia && git pull origin main && npm run build && pm2 restart academia-api && echo '''' && echo ''‚úÖ Deploy conclu√≠do! Valida√ß√£o de status corrigida.''\")",
      "Bash(ssh:*)",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"grep -n ''releaseEntryAndExit'' /var/www/academia/dist/index.js | head -3\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"grep -A 5 -B 5 ''releaseEntryAndExit'' /var/www/academia/dist/index.js | grep -E ''releaseEntryAndExit|Liberando ENTRADA E SA√çDA|const released'' | head -10\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"grep -B 10 ''const released = await'' /var/www/academia/dist/index.js | grep -E ''console.log.*Tipo de acesso|releaseEntry|releaseExit|releaseEntryAndExit'' | tail -5\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"cd /var/www/academia && git pull origin main && npm run build && pm2 restart academia-api && echo '''' && echo ''‚úÖ Deploy conclu√≠do! Sistema agora usa releaseEntryAndExit (libera ambos lados).''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"pm2 flush academia-api && echo '''' && echo ''‚úÖ Sistema atualizado! Agora libera AMBOS os lados da catraca.'' && echo '''' && echo ''üë§ PASSE O ROSTO NA LEITORA FACIAL AGORA'' && echo '''' && echo ''üîç Monitorando...''\")",
      "Bash(\"C:\\Program Files\\Git\\usr\\bin\\ssh.exe\" -o StrictHostKeyChecking=no root@72.60.2.237 \"timeout 120 tail -f /root/.pm2/logs/academia-api-out.log 2>&1 | grep --line-buffered -E ''Tipo de acesso detectado|ENTRADA E SA√çDA|Processing log|Saved.*log for student|Verificando libera√ß√£o|Academia.*usa Toletus|Enviando comando|Catraca.*liberada|releaseEntryAndExit''\")",
      "Bash(powershell.exe:*)"
    ],
    "deny": [],
    "ask": []
  }
}
