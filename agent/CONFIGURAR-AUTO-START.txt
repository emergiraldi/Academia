===============================================
  CONFIGURAR AUTO-START DO AGENT NO WINDOWS
===============================================


üì¶ INSTALA√á√ÉO COMPLETA NAS ACADEMIAS (CLIENTES)
===============================================

PASSO 1: PREPARAR PASTA
-----------------------
1. Criar pasta no computador da academia:
   C:\SysFit\agent

2. Copiar TODOS os arquivos desta pasta para l√°:
   - agent.js
   - package.json
   - .env.example
   - start-agent.bat
   - COMANDOS-AGENT.txt
   - CONFIGURAR-AUTO-START.txt


PASSO 2: INSTALAR NODE.JS
--------------------------
1. Baixar Node.js 20 LTS: https://nodejs.org
2. Executar instalador
3. Verificar: abrir CMD e digitar "node -v"


PASSO 3: INSTALAR DEPEND√äNCIAS
-------------------------------
1. Abrir Prompt de Comando (CMD)
2. Navegar at√© a pasta:
   cd C:\SysFit\agent

3. Instalar depend√™ncias:
   npm install

4. Instalar PM2 globalmente:
   npm install -g pm2


PASSO 4: CONFIGURAR .ENV
------------------------
1. Copiar .env.example para .env:
   copy .env.example .env

2. Editar arquivo .env com os dados da academia:
   notepad .env

   Configurar:
   - AGENT_ID=academia-X  (fornecido no cadastro)
   - LEITORA_IP=192.168.X.X  (IP do Control ID)
   - VPS_URL=wss://www.sysfitpro.com.br/agent
   - AUTH_TOKEN=xxxxx  (fornecido pelo suporte)

3. Salvar e fechar


PASSO 5: USAR O ARQUIVO CORRETO
--------------------------------
‚≠ê OP√á√ÉO A - Mais f√°cil (Recomendado):
   1. Renomear: start-agent-PARA-CLIENTES.bat
      Para: start-agent.bat

   (Este arquivo j√° tem o caminho correto C:\SysFit\agent)

OP√á√ÉO B - Manual:
   1. Editar o arquivo start-agent.bat:
      notepad start-agent.bat

   2. Mudar a linha 6 de:
      cd /d "C:\Projeto\Academia\agent"

      Para:
      cd /d "C:\SysFit\agent"

   3. Salvar e fechar


PASSO 6: TESTAR AGENT
----------------------
1. Executar manualmente o script:
   C:\SysFit\agent\start-agent.bat

2. Verificar se iniciou:
   pm2 status

3. Ver logs:
   pm2 logs agent-sysfitpro

4. Deve aparecer:
   ‚úÖ "Conectado ao servidor VPS!"
   ‚úÖ "Autenticado como academia-X"


PASSO 7: CONFIGURAR AUTO-START
-------------------------------
Agora siga as instru√ß√µes abaixo para configurar auto-start...


===============================================
  AUTO-START - AGENDADOR DE TAREFAS
===============================================

O arquivo start-agent.bat j√° foi criado!
Agora siga estes passos para configurar o auto-start:


üìã OP√á√ÉO 1: AGENDADOR DE TAREFAS (RECOMENDADO)
===============================================

1. Pressione Win + R e digite: taskschd.msc
   (Isso abre o Agendador de Tarefas)

2. No painel direito, clique em "Criar Tarefa B√°sica"

3. Preencha os campos:

   Nome: SysFit Agent Auto-Start
   Descri√ß√£o: Inicia o Agent do SysFit Pro automaticamente

4. Gatilho:
   ‚òëÔ∏è Quando o computador iniciar

5. A√ß√£o:
   ‚òëÔ∏è Iniciar um programa

6. Programa/script:

   ‚ö†Ô∏è NA SUA M√ÅQUINA (desenvolvimento):
   C:\Projeto\Academia\agent\start-agent.bat

   ‚ö†Ô∏è NAS ACADEMIAS (produ√ß√£o):
   C:\SysFit\agent\start-agent.bat

7. IMPORTANTE - Configura√ß√µes avan√ßadas:
   - Marque: ‚úÖ "Executar com privil√©gios mais altos"
   - Marque: ‚úÖ "Executar estando o usu√°rio conectado ou n√£o"
   - Configure para: "Windows 10"

8. Clique em "Concluir"


üìã OP√á√ÉO 2: PM2 SAVE (MAIS SIMPLES)
===============================================

Se PM2 j√° est√° rodando o agent, basta salvar:

1. Verificar se agent est√° rodando:
   pm2 status

2. Se estiver rodando, salvar configura√ß√£o:
   pm2 save

3. Configurar PM2 para restaurar na inicializa√ß√£o:
   pm2 startup

   (Execute o comando que aparecer na tela)


üìã OP√á√ÉO 3: PASTA DE INICIALIZA√á√ÉO (MENOS RECOMENDADO)
===============================================

1. Pressione Win + R e digite: shell:startup

2. Isso abre a pasta de inicializa√ß√£o do Windows

3. Clique com bot√£o direito dentro da pasta

4. Novo > Atalho

5. Localiza√ß√£o:

   ‚ö†Ô∏è NA SUA M√ÅQUINA (desenvolvimento):
   C:\Projeto\Academia\agent\start-agent.bat

   ‚ö†Ô∏è NAS ACADEMIAS (produ√ß√£o):
   C:\SysFit\agent\start-agent.bat

6. Nome do atalho:
   SysFit Agent


===============================================
  TESTAR SE FUNCIONOU
===============================================

1. Reinicie o computador

2. Aguarde 1-2 minutos ap√≥s o login

3. Abra o terminal e digite:
   pm2 status

4. O agent "agent-sysfitpro" deve aparecer como "online"


===============================================
  DESATIVAR AUTO-START
===============================================

OP√á√ÉO 1 (Agendador de Tarefas):
   1. Abrir taskschd.msc
   2. Encontrar "SysFit Agent Auto-Start"
   3. Clicar com bot√£o direito > Desabilitar (ou Excluir)

OP√á√ÉO 2 (PM2):
   pm2 unstartup
   pm2 delete agent-sysfitpro

OP√á√ÉO 3 (Pasta de Inicializa√ß√£o):
   1. Win + R > shell:startup
   2. Deletar o atalho "SysFit Agent"


===============================================
  PROBLEMAS?
===============================================

‚ùå Agent n√£o inicia ap√≥s reiniciar?
   - Verifique se PM2 est√° instalado globalmente
   - Execute manualmente o start-agent.bat:
     * Sua m√°quina: C:\Projeto\Academia\agent\start-agent.bat
     * Academias: C:\SysFit\agent\start-agent.bat
   - Veja os erros que aparecem

‚ùå Script n√£o executa?
   - Clique com bot√£o direito no start-agent.bat
   - Propriedades > Desbloquear (se aparecer)
   - Tente executar como Administrador

‚ùå PM2 n√£o encontrado?
   npm install -g pm2


===============================================
  CHECKLIST R√ÅPIDO - INSTALA√á√ÉO NA ACADEMIA
===============================================

‚ñ° 1. Criar pasta C:\SysFit\agent
‚ñ° 2. Copiar todos os arquivos do agent
‚ñ° 3. Instalar Node.js 20 LTS
‚ñ° 4. Instalar PM2: npm install -g pm2
‚ñ° 5. Instalar depend√™ncias: npm install
‚ñ° 6. Configurar .env com dados da academia
‚ñ° 7. Editar start-agent.bat (trocar caminho)
‚ñ° 8. Testar: executar start-agent.bat
‚ñ° 9. Verificar: pm2 status
‚ñ° 10. Configurar Auto-Start no Agendador de Tarefas
‚ñ° 11. Reiniciar computador e testar


===============================================
  ARQUIVOS NECESS√ÅRIOS PARA COPIAR
===============================================

‚úÖ agent.js
‚úÖ package.json
‚úÖ package-lock.json (se existir)
‚úÖ .env.example
‚úÖ start-agent.bat (para desenvolvimento)
‚úÖ start-agent-PARA-CLIENTES.bat (renomear para start-agent.bat)
‚úÖ COMANDOS-AGENT.txt
‚úÖ CONFIGURAR-AUTO-START.txt
‚úÖ README.md (opcional)

IMPORTANTE: Nas academias, use start-agent-PARA-CLIENTES.bat
(j√° tem o caminho C:\SysFit\agent configurado)


===============================================
√öltima atualiza√ß√£o: Janeiro 2025
Vers√£o: 3.0.0
===============================================
